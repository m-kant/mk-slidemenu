!function(){_defaults={className:"",triggerClass:"mk-slidemenu-trigger",backButtonContent:"â€¹ Back",backButtonClass:"mk-slidemenu-back",width:null,height:null};var e=function(){for(var e={},t=0;t<arguments.length;t++){mixin=arguments[t];for(var i in mixin)mixin.hasOwnProperty(i)&&(e[i]=mixin[i])}return e},t=function(){this.upmenu&&this.submenu&&(s(this.upmenu,"mk-active"),n(this.upmenu,"mk-past"),n(this.submenu,"mk-active"),s(this.submenu,"mk-future"))},i=function(){this.upmenu&&this.submenu&&(s(this.submenu,"mk-active"),n(this.submenu,"mk-future"),n(this.upmenu,"mk-active"),s(this.upmenu,"mk-past"))},n=function(e,t){var i=new RegExp("(^|\\s)"+t+"(\\s|$)","g");if(!i.test(e.className))return e.className=(e.className+" "+t).replace(/\s+/g," ").replace(/(^ | $)/g,""),e},s=function(e,t){var i=new RegExp("(^|\\s)"+t+"(\\s|$)","g");e.className=e.className.replace(i,"$1").replace(/\s+/g," ").replace(/(^ | $)/g,"")},r=function(e){for(var t=e.childNodes,i=0;i<t.length;i++)if(t[i].nodeType===Node.TEXT_NODE)return t[i]},a=function(e,t){var i=document.createElement(t);return e.parentNode.insertBefore(i,e),i.appendChild(e),i},o=function(e,t){var i=e.firstChild;i?e.insertBefore(t,i):e.appendChild(t)};widget=function(t,i){this.options=e(_defaults,i),this.root=t,this.root.className+=" mk-slidemenu-root mk-active",this.wrapper=this.getWrapper(),this.options.width&&(this.wrapper.style.width=this.options.width),this.options.height&&(this.wrapper.style.height=this.options.height,this.wrapper.style.overflowY="auto"),this.decompose()},widget.prototype={decompose:function(){for(var e=this.findSubmenus(),t=0;t<e.length;t++){var i=e[t];this.processSubmenu(i)}for(var t=0;t<e.length;t++)this.wrapper.appendChild(e[t])},findSubmenus:function(){return this.root.querySelectorAll("li>ul")},processSubmenu:function(e){e.className+=" mk-submenu mk-future";var n=e.parentNode;n.className+=" mk-has-submenu";var s={upmenu:n.parentNode,submenu:e,widget:this};this.getTrigger(n).onclick=t.bind(s),this.getBackTrigger(e).onclick=i.bind(s)},getTrigger:function(e){for(var t,i=e.querySelectorAll("a"),n=0;n<i.length;n++)if(i[n].parentNode===e){t=i[n];break}return t||(txtNode=r(e),txtNode?t=a(txtNode,"a"):(t=document.createElement("a"),t.innerHTML=">>",o(e,t))),t?t:e},getBackTrigger:function(e){var t=e.querySelector("."+this.options.backButtonClass);return t||(t=this.createBackTriggerElement(e)),t},createBackTriggerElement:function(e){var t=document.createElement("li"),i=document.createElement("a");return t.className=this.options.backButtonClass,i.innerHTML=this.options.backButtonContent,t.appendChild(i),e.insertBefore(t,e.firstChild),t},getWrapper:function(){if(this.wrapper)return this.wrapper;if(this.options.wrapper)return this.options.wrapper;var e=document.createElement("div");return e.className="mk-slidemenu",this.options.className&&(e.className+=" "+this.options.className),this.root.parentNode.insertBefore(e,this.root),e.appendChild(this.root),e}},mk=window.mk||{},mk.Slidemenu=widget}();